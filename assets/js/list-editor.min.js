!function(a){function t(){var e=a(".w4pl_active .w4pl_group_fields").outerHeight();a("#w4pl_list_options").css("minHeight",e)}a(document).on("w4pl/form_loaded",function(e){t(),a("#w4pl_orderby").trigger("change")}),a(document).ready(function(){a(document).trigger("w4pl/form_loaded",a("#w4pl_list_options"))}),a(document.body).on("change",".w4pl_field_compare",function(){-1!==a.inArray(a(this).val(),["IN","NOT IN","BETWEEN","NOT BETWEEN"])?a(this).parent("td").next("td").children(".item").show().children(".button").show():(a(this).parent("td").next("td").children(".item").hide().children(".button").hide(),a(this).parent("td").next("td").find(".item:first").show())}),a(document.body).on("click",".w4pl_clone_parent",function(e){var t=a(this).parent(".wpce_parent_item").clone();return a(this).parent(".wpce_parent_item").after(t),a(this).parent(".wpce_parent_item").parent().find(".w4pl_remove_parent").show(),!1}),a(document.body).on("click",".w4pl_remove_parent",function(e){var t=a(this);return 0==t.parent(".wpce_parent_item").siblings().length?t.hide():(a(".w4pl_remove_parent").show(),t.parent(".wpce_parent_item").remove()),!1}),a(document.body).on("change",".w4pl_onchange_lfr",function(){!function(e,t){a("#publish").addClass("disabled"),null===t&&(t="w4pl_field_group_type");if(null===e)e=a("#w4pl_list_options :input").serialize()+"&action=w4pl_list_edit_form_html";a("#w4pl_list_options").append('<div id="w4pl_lo"></div>'),a.post(ajaxurl,e,function(e){return a("#w4pl_list_options").replaceWith(e),a("#"+t).addClass("w4pl_active"),a(document).trigger("w4pl/form_loaded",a("#w4pl_list_options")),a("#publish").removeClass("disabled"),!1})}(null,a(this).parents(".w4pl_field_group").attr("id"))}),a(document.body).on("click",".w4pl_toggler",function(){return a(a(this).data("target")).toggle(),t(),!1}),a(document.body).on("change","#w4pl_orderby",function(){"meta_value"==a(this).val()||"meta_value_num"==a(this).val()?a("#orderby_meta_key_wrap").show():a("#orderby_meta_key_wrap").hide()}),a(document.body).on("click",".w4pl_group_title",function(){return a("#w4pl_list_options").height("auto"),a(".w4pl_field_group").removeClass("w4pl_active"),a(this).parent(".w4pl_field_group").addClass("w4pl_active"),a("#w4pl_tab_id").val(a(this).parent(".w4pl_field_group").attr("id")),t(),!1}),a(document.body).on("click","#w4pl_template_buttons a",function(e){return function(e,t){var n=document.getElementById(e),r=n.scrollTop,a=0,l=n.selectionStart||"0"==n.selectionStart?"ff":!!document.selection&&"ie";if("ie"==l){n.focus(),(o=document.selection.createRange()).moveStart("character",-n.value.length),a=o.text.length}else"ff"==l&&(a=n.selectionStart);var i=n.value.substring(0,a),_=n.value.substring(a,n.value.length);if(n.value=i+t+_,a+=t.length,"ie"==l){var o;n.focus(),(o=document.selection.createRange()).moveStart("character",-n.value.length),o.moveStart("character",a),o.moveEnd("character",0),o.select()}else"ff"==l&&(n.selectionStart=a,n.selectionEnd=a,n.focus());n.scrollTop=r}("w4pl_template",a(this).data("code")),!1}),a(document).ready(function(){function e(){a("#w4pl_meta_query_table tbody tr").each(function(e,t){var n=a(t);n.find(".wffi_w4pl_meta_query_key").attr("name","w4pl[meta_query][key]["+e+"]"),n.find(".wffi_w4pl_meta_query_compare").attr("name","w4pl[meta_query][compare]["+e+"]"),n.find(".wffi_w4pl_meta_query_value").attr("name","w4pl[meta_query][value]["+e+"][]"),n.find("td.values").attr("data-pos",e),a(this).replaceWith(n)})}function n(e){var t=e.children(".item"),r=e.data("pos");t.each(function(e,t){var n=a(t);n.find("input").attr("name","w4pl[meta_query][value]["+r+"]["+e+"]"),a(this).replaceWith(n)})}a(document.body).on("click","#w4pl_meta_query_add_btn",function(){return a(a("#w4pl_meta_query_clone tbody").html()).appendTo("#w4pl_meta_query_table tbody"),e(),!1}),a(document.body).on("click",".w4pl_meta_query_remove_btn",function(){return a(this).parents("tr").remove(),e(),!1}),a(document.body).on("click",".w4pl_meta_query_value_add",function(){a(".w4pl_meta_query_value_del").show();var e=a(this).parent(".item").parent("td");return a(this).parent(".item").after(a("#w4pl_meta_query_value_clone").html()),n(e),!1}),a(document.body).on("click",".w4pl_meta_query_value_del",function(){a(".w4pl_meta_query_value_del").show();var e=a(this).parent(".item").parent("td"),t=a(this);return 1==e.children(".item").length?a(this).hide():(t.parent(".item").remove(),n(e)),!1}),a(document.body).on("change",".w4pl_meta_query_compare",function(){-1!=a.inArray(a(this).val(),["IN","NOT IN","BETWEEN","NOT BETWEEN"])?a(this).parent("td").next("td").children(".item").show().children(".w4pl_meta_query_value_add, .w4pl_meta_query_value_del").show():(a(this).parent("td").next("td").children(".item").hide().children(".w4pl_meta_query_value_add, .w4pl_meta_query_value_del").hide(),a(this).parent("td").next("td").find(".item:first").show())}),a(".w4pl_meta_query_compare").each(function(e,t){a(this).trigger("change")})}),a(document).ready(function(){function e(){a("#w4pl_tax_query_table tbody tr").each(function(e,t){var n=a(t);n.find(".wffi_w4pl_tax_query_taxonomy").attr("name","w4pl[tax_query][taxonomy]["+e+"]").removeAttr("id"),n.find(".wffi_w4pl_tax_query_field").attr("name","w4pl[tax_query][field]["+e+"]").removeAttr("id"),n.find(".wffi_w4pl_tax_query_operator").attr("name","w4pl[tax_query][operator]["+e+"]").removeAttr("id"),n.find(".wffi_w4pl_tax_query_terms").attr("name","w4pl[tax_query][terms]["+e+"][]").removeAttr("id"),n.find("td.terms").attr("data-pos",e),a(this).replaceWith(n)})}function n(e){var t=e.children(".item"),r=e.data("pos");t.each(function(e,t){var n=a(t);n.find("input").attr("name","w4pl[tax_query][terms]["+r+"]["+e+"]"),a(this).replaceWith(n)})}a(document.body).on("click","#w4pl_tax_query_add_btn",function(){return a(a("#w4pl_tax_query_clone tbody").html()).appendTo("#w4pl_tax_query_table tbody"),e(),!1}),a(document.body).on("click",".w4pl_tax_query_remove_btn",function(){return a(this).parents("tr").remove(),e(),!1}),a(document.body).on("click",".w4pl_tax_query_value_add",function(){a(".w4pl_tax_query_value_del").show();var e=a(this).parent(".item").parent("td");return a(this).parent(".item").after(a("#w4pl_tax_query_value_clone").html()),n(e),!1}),a(document.body).on("click",".w4pl_tax_query_value_del",function(){a(".w4pl_tax_query_value_del").show();var e=a(this).parent(".item").parent("td"),t=a(this);return 1==e.children(".item").length?a(this).hide():(t.parent(".item").remove(),n(e)),!1}),a(document.body).on("change",".w4pl_tax_query_operator",function(){-1!=a.inArray(a(this).val(),["IN","NOT IN"])?(console.log(a(this).val()),a(this).parents("tr").find(".w4pl_tax_query_terms_cell").children(".item").show().children(".w4pl_tax_query_value_add, .w4pl_tax_query_value_del").show()):(a(this).parents("tr").find(".w4pl_tax_query_terms_cell .item").hide().children(".w4pl_tax_query_value_add, .w4pl_tax_query_value_del").hide(),a(this).parents("tr").find(".w4pl_tax_query_terms_cell .item:first").show())}),a(".w4pl_tax_query_operator").each(function(e,t){a(this).trigger("change")})})}(jQuery);